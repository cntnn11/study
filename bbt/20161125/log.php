<?php
/**
 *  @desc http://test.study.com/bbt/20161125/log.php
 *      
 *      
*/
echo '<pre>';

$taskIdArr   = [101153,101158,101173,101174,101175,101176,101177,101178,101179,101180,101181,101182,101183,101184,101185,101186,101187,101189,101188,101190,101191,101192,101193,101194,101195,101196,101197,101198,101199,101200,101201,101202,101203,101204,101205,101206,101207,101208,101209,101210,101211,101212,101213,101214,101215,101216,101217,101218,101219,101220,101221,101222,101223,101224,101225,101226,101227,101228,101229,101230,101231,101232,101233,101234,101235,101236,101237,101238,101239,101240,101241,101242,101243,101244,101245,101246,101247,101248,101249,101250,101251,101252,101253,101254,101255,101256,101257,101258,101259,101260,101261,101262,101263,101264,101265,101266,101267,101268,101269,101270,101271,101272,101273,101274,101275,101276,101277,101278,101279,101280,101281,101282,101283,101284,101285,101286,101287,101288,101289,101290,101291,101292,101293,101294,101295,101296,101297,101298,101299,101300,101301,101302,101303,101304,101305,101306,101307,101308,101309,101310,101311,101312,101313,101314,101315,101316,101317,101318,101319,101320,101322,101321,101323,101324,101325,101326,101327,101328,101329,101330,101331,101332,101333,101334,101335,101336,101337,101338,101339,101340,101341,101342,101343,101344,101345,101346,101348,101349,101350,101351,101352,101353,101355,101357,101358,101359,101361,101362,101364,101366,101368,101370,101372,101373,101374,101376,101378,101380,101385,101397,101415,101416,101417,101418,101419,101420,101421,101422,101423,101424,101425,101426,101427,101428,101429,101430,101431,101432,101433,101434,101435,101436,101437,101438,101439,101440,101441,101442,101443,101444,101445,101446,101448,101447,101449,101450,101451,101452,101453,101454,101456,101455,101457,101458,101459,101460,101461,101462,101463,101464,101465,101466,101467,101468,101469,101470,101471,101472,101473,101474,101475,101476,101477,101478,101479,101480,101481,101482,101483,101484,101485,101486,101487,101488,101489,101490,101491,101492,101493,101494,101495,101496,101497,101498,101499,101500,101501,101502,101503,101504,101505,101506,101507,101508,101509,101510,101511,101512,101513,101514,101515,101516,101517,101518,101519,101520,101521,101522,101523,101524,101525,101526,101527,101528,101529,101530,101531,101532,101533,101534,101535,101536,101537,101538,101539,101540,101541,101542,101543,101544,101545,101546,101547,101548,101549,101550,101551,101552,101553,101554,101555,101556,101557,101558,101559,101560,101561,101562,101563,101564,101565,101566,101567,101568,101569,101570,101571,101572,101573,101574,101575,101576,101577,101578,101579,101580,101581,101582,101583,101584,101585,101586,101587,101588,101589,101590,101591,101592,101593,101594,101595,101596,101597,101598,101599,101600,101601,101602,101603,101604,101605,101606,101607,101608,101609,101610,101611,101612,101613,101614,101615,101616,101617,101618,101619,101620,101621,101622,101623,101624,101625,101626,101627,101628,101629,101630,101631,101632,101633,101634,101635,101636,101637,101638,101639,101640,101641,101642,101643,101644,101645,101646,101647,101648,101649,101650,101651,101652,101653,101654,101655,101656,101657,101658,101659,101660,101661,101662,101663,101664,101665,101666,101667,101668,101669,101670,101671,101672,101673,101674,101675,101676,101677,101678,101679,101680,101681,101682,101683,101684,101685,101686,101687,101688,101689,101690,101691,101692,101693,101694,101695,101696,101697,101698,101699,101700,101701,101702,101703,101704,101705,101706,101707,101708,101709,101710,101711,101712,101713,101714,101715,101716,101717,101718,101719,101720,101724,101731,101739,101744,101745,101772,101774,101788,101796,101814,101829,101836,101874,101919,101949,101958,101966,101973,101977,101981,101988,101991,101997,101999,102010,102013,102018,102065,102079,102082,102085,102086,102117,102125,102126,102155,102165,102206,102213,102249,102250,102266,102268,102306,102309,102310,102349,102396,102398,102416,102420,102422,102428,102439,102442,102472,102476,102484,102593,102613,102630,102752,102760,102809,102823,102825,102829,102830,102834,102851,102871,102872,102893,102916,102928,102933,102961,102978,102979];

$tableHave   = [101153,101189,101158,101190,101192,101194,101196,101416,101198,101200,101202,101204,101206,101208,101210,101212,101214,101216,101218,101220,101222,101224,101226,101228,101230,101232,101234,101236,101238,101240,101242,101244,101246,101248,101250,101252,101254,101256,101258,101260,101262,101264,101266,101268,101270,101272,101274,101276,101278,101280,101282,101284,101286,101288,101290,101292,101294,101296,101298,101300,101302,101304,101306,101308,101310,101312,101314,101316,101318,101320,101321,101324,101326,101418,101328,101330,101332,101334,101420,101336,101338,101340,101342,101344,101346,101349,101351,101353,101355,101357,101359,101361,101362,101364,101366,101368,101370,101372,101374,101376,101378,101380,101358,101422,101373,101385,101397,101424,101426,101428,101430,101432,101434,101436,101438,101440,101442,101444,101446,101447,101450,101452,101454,101455,101458,101460,101462,101464,101466,101468,101470,101472,101474,101476,101478,101480,101482,101484,101486,101488,101490,101492,101494,101496,101498,101500,101502,101504,101506,101508,101510,101512,101514,101516,101518,101520,101522,101524,101526,101528,101530,101532,101534,101536,101538,101540,101542,101544,101546,101548,101550,101552,101554,101556,101558,101560,101562,101564,101566,101568,101570,101572,101574,101576,101578,101580,101582,101584,101586,101588,101590,101592,101594,101596,101598,101600,101602,101604,101606,101608,101610,101612,101614,101616,101618,101620,101622,101624,101626,101628,101630,101632,101634,101636,101638,101640,101642,101644,101646,101648,101650,101652,101654,101656,101658,101660,101662,101664,101666,101668,101670,101672,101674,101676,101678,101680,101682,101684,101686,101688,101690,101692,101694,101696,101698,101700,101702,101704,101706,101708,101710,101712,101714,101716,101718,101720,101724,101731,101739,101744,101745,101772,101774,101788,101796,101814,101829,101836,101874,101919,101949,101958,101966,101973,101977,101981,101988,101991,101997,101999,102010,102013,102018,102065,102079,102082,102085,102086,102117,102125,102126,102155,102165,102206,102213,102249,102250,102266,102268,102306,102309,102310,102349,102396,102398,102416,102420,102422,102428,102439,102442,102472,102476,102484,102593,102613,102630,102752,102760,102809,102823,102825,102829,102830,102834,102851,102871,102872,102893,102916,102928,102933,102961,102978,102979,];
/*101173,101174,101175,101179,101186,101188,101197,101205,101209,101211,101213,101215,101219,101223,101227,101229,101237,101241,101243,101245,101247,101249,101251,101257,101263,101267,101273,101291,101293,101295,101299,101305,101309,101311,101317,101319,101323,101327,101333,101352,101415,101417,101419,101421,101429,101435,101437,101439,101441,101445,101453,101461,101463,101465,101479,101481,101483,101489,101491,101493,101495,101497,101501,101511,101527,101539,101545,101547,101549,101551,101553,101555,101557,101561,101565,101567,101571,101575,101577,101579,101581,101583,101585,101589,101591,101603,101611,101613,101615,101617,101621,101625,101633,101637,101641,101647,101653,101657,101659,101665,101671,101677,101681,101697,101701,101703,101707,101709,101713*/

echo implode(',', array_diff($taskIdArr, $tableHave) );
exit();

include_once ("./procurement_task_push-2016-11-25.log.2016112505.php");


//print_r($timeArr);
/*print_r($dataArr);
exit();*/

$i  = 0;
$apiArr = [];
foreach ($dataArr as $key => $row)
{
    if( $key%3==0 )
    {
//print_r($key);
        $time   = $timeArr[$i];
        $apiArr[$i][0]   = $row;
        $apiArr[$i][1]   = $dataArr[$key+1];
        $apiArr[$i][2]   = $dataArr[$key+2];
        $i++;
    }
}

/*print_r($apiArr);
exit();*/

$apiTotal   = count($apiArr)-1;
$apiDiffArr = $apiArr;
$diffArr    = [];
foreach ($apiArr as $k1 => $r1)
{
    unset($apiDiffArr[$k1]);
    //$diffArr[$k1]['my']  = $r1;
    $taskId1    = $r1[1]['data']['taskId'];
    $skuIdList1 = $r1[0]['skuIdList'];
    $kSkuIdList1= array_keys($skuIdList1);
    sort($kSkuIdList1);
    $sSkuIdList1= implode(",", $kSkuIdList1);

    for ($j=$apiTotal; $j >=0 ; $j--)
    {
        $k2 = $j;
        $r2 = $apiArr[$j];
        if( empty($r2) )
        {
            continue;
        }
        $taskId2    = $r2[1]['data']['taskId'];
        $skuIdList2 = $r2[0]['skuIdList'];
        $kSkuIdList2= array_keys($skuIdList2);
        sort($kSkuIdList2);
        $sSkuIdList2= implode(",", $kSkuIdList2);
        //$skuIdDiff  = empty( array_diff($sSkuIdList1, $sSkuIdList2) );
        $skuIdDiff  = ($sSkuIdList1==$sSkuIdList2 ? true : false);
        if( $k1 != $k2 && $skuIdDiff && $taskId1 != $taskId2 )
        {
            $diffArr[$taskId1][]    = $taskId2;
            /*foreach ($diffArr as $dTaskId1 => $rowDiff)
            {
                if( !in_array($taskId2, $rowDiff) )
                {
                    $diffArr[$taskId1][]  = $taskId2;
                }
                else
                {
                    $diffArr[$taskId1][]  = $taskId2;
                }
            }*/
        }
    }
}

$taskIdArr  = [];
foreach ($diffArr as $taskId => $rowDiff)
{
    $taskIdArr[] = $taskId;
}
array_unique($taskIdArr);
echo json_encode($taskIdArr);
echo "<br/>";
/*echo json_encode( array_diff($taskIdArr, [101173,101174,101175,101179,101186,101188,101197,101205,101209,101211,101213,101215,101219,101223,101227,101229,101237,101241,101243,101245,101247,101249,101251,101257,101263,101267,101273,101291,101293,101295,101299,101305,101309,101311,101317,101319,101323,101327,101333,101352,101415,101417,101419,101421,101429,101435,101437,101439,101441,101445,101453,101461,101463,101465,101479,101481,101483,101489,101491,101493,101495,101497,101501,101511,101527,101539,101545,101547,101549,101551,101553,101555,101557,101561,101565,101567,101571,101575,101577,101579,101581,101583,101585,101589,101591,101603,101611,101613,101615,101617,101621,101625,101633,101637,101641,101647,101653,101657,101659,101665,101671,101677,101681,101697,101701,101703,101707,101709,101713]) );*/

exit();
/*$endArr = [];
foreach ($diffArr as $key => $row)
{
    if( count($row)>1 )
    {
        $endArr[$key]   = $row;
    }
}
print_r($endArr);*/
